import numpy as np
import matplotlib.pyplot as plt
from sklearn.linear_model import   LinearRegression


# 한글 폰트 설정
plt.rc('font', family='Malgun Gothic')  # Windows
# plt.rc('font', family='AppleGothic')  # macOS
plt.rc('axes', unicode_minus=False)


# 데이터: 작업 시간 (시간)과 생산량 (개수)
work_hours = np.array([1, 2, 3, 4,   5]).reshape(-1, 1)  # 작업 시간
output_units = np.array([50, 60, 70, 80,   90])  # 생산량

# 선형 회귀 모델 학습
model = LinearRegression()
model.fit(work_hours, output_units)

# 예측
predicted_output =   model.predict(work_hours)

# 시각화
plt.scatter(work_hours, output_units,   color="blue", label="실제 데이터")
plt.plot(work_hours, predicted_output,   color="red", label="예측 생산량")
plt.title("작업 시간에 따른 생산량 예측")
plt.xlabel("작업 시간 (시간)")
plt.ylabel("생산량 (개수)")
plt.legend()
plt.show()

# 결과 출력
print(f"기울기(시간당   생산량 증가): {model.coef_[0]:.2f}")
print(f"절편(초기   생산량): {model.intercept_:.2f}")

"""
========== 연습 문제 ==========

작업 시간과 생산량 간의 관계를 분석하기 위해 선형회귀 분석을 수행하는 코드입니다.
5개의 데이터 포인트를 사용하여 작업 시간에 따른 생산량을 예측합니다.

문제 1: 선형회귀의 기본 개념을 설명하세요.
   - 선형회귀의 수학적 모델 (y = ax + b)에서 각 요소의 의미를 설명하세요.
   - 이 예제에서 독립변수와 종속변수가 무엇인지 식별하세요.
   - 선형회귀가 적합한 상황과 부적합한 상황을 구분하세요.

문제 2: 회귀계수의 해석을 해보세요.
   - 기울기(계수) 값의 실제 의미를 해석하세요.
   - 절편 값이 현실적으로 타당한지 평가하세요.
   - 만약 작업 시간이 6시간이라면 예상 생산량은 얼마인지 계산하세요.

문제 3: 모델의 성능을 평가해보세요.
   a) R² (결정계수)를 계산하여 모델의 설명력을 평가하세요.
   b) MSE (평균제곱오차)와 RMSE를 계산하세요.
   c) MAE (평균절대오차)를 계산하세요.
   d) 각 성능 지표의 의미와 해석 방법을 설명하세요.

문제 4: 잔차 분석을 수행해보세요.
   - 각 데이터 포인트의 잔차(실제값 - 예측값)를 계산하세요.
   - 잔차 플롯을 그려서 모델의 적합성을 시각적으로 평가하세요.
   - 잔차의 패턴을 통해 선형모델의 가정 위반 여부를 판단하세요.

문제 5: 다양한 데이터로 실험해보세요.
   a) 이상치가 있는 데이터를 추가했을 때의 영향을 분석하세요.
      예: work_hours에 [6], output_units에 [120] 추가
   b) 비선형 관계를 가진 데이터로 변경하여 선형회귀의 한계를 확인하세요.
   c) 더 많은 데이터 포인트(20개 이상)를 생성하여 모델을 학습시켜보세요.

문제 6: 신뢰구간과 예측구간을 계산해보세요.
   - 회귀계수(기울기, 절편)의 95% 신뢰구간을 계산하세요.
   - 새로운 x값에 대한 예측값의 95% 예측구간을 구하세요.
   - 신뢰구간과 예측구간의 차이점을 설명하세요.

문제 7: 가설검정을 수행해보세요.
   - 기울기가 0인지에 대한 t-검정을 수행하세요.
   - 귀무가설과 대립가설을 설정하세요.
   - p-value를 구하고 통계적 유의성을 판단하세요.

문제 8: 시각화를 개선해보세요.
   a) 신뢰구간과 예측구간을 그래프에 추가하세요.
   b) 잔차 플롯을 별도로 그려서 모델 진단을 시각화하세요.
   c) Q-Q 플롯을 그려서 잔차의 정규성을 확인하세요.
   d) 상관계수를 계산하고 그래프에 표시하세요.

문제 9: 다항회귀와 비교해보세요.
   - 2차 다항회귀 모델을 적용해보세요.
   - 선형회귀와 다항회귀 모델의 성능을 비교하세요.
   - 과적합 여부를 판단하는 방법을 설명하세요.

문제 10: 실제 응용 사례를 만들어보세요.
   a) 판매 분야: 광고비와 매출액의 관계 분석
   b) 교육 분야: 공부 시간과 시험 점수의 관계 분석
   c) 제조 분야: 온도와 제품 품질의 관계 분석
   각 사례에 대해 가상의 데이터를 생성하고 회귀분석을 수행하세요.

문제 11: 선형회귀의 가정들을 검증해보세요.
   a) 선형성 가정: 산점도를 통한 확인
   b) 독립성 가정: 더빈-왓슨 검정 수행
   c) 등분산성 가정: 브로이쉬-페이건 검정 수행
   d) 정규성 가정: 잔차의 정규성 검정
   각 가정이 위배될 때의 해결방법을 제시하세요.

문제 12: 교차검증을 적용해보세요.
   - Leave-One-Out 교차검증을 수행하세요.
   - k-fold 교차검증(k=3)을 수행하세요.
   - 교차검증을 통한 모델 성능 평가의 장점을 설명하세요.

문제 13: 상관분석과 회귀분석을 비교하세요.
   - 피어슨 상관계수를 계산하세요.
   - 상관계수와 회귀계수의 관계를 설명하세요.
   - "상관관계가 인과관계를 의미하지 않는다"는 말의 의미를 설명하세요.

문제 14: 로버스트 회귀를 적용해보세요.
   - 이상치에 강건한 회귀 방법들을 조사하세요.
   - RANSAC이나 Huber 회귀를 적용해보세요.
   - 일반 선형회귀와 결과를 비교하세요.

=============================
"""